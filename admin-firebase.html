<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin - PerfumParadiseRD (Firebase)</title>
    <link rel="stylesheet" href="admin-style.css" />
  </head>
  <body>
    <!-- Pantalla de Login -->
    <div id="loginScreen" class="login-screen">
      <div class="login-container">
        <img src="logo2.jpeg" alt="Logo" class="login-logo" />
        <h1>Panel de Administraci√≥n</h1>
        <p class="login-subtitle">PerfumParadiseRD - Firebase</p>
        <form id="loginForm">
          <div class="form-group">
            <label for="email">Email</label>
            <input
              type="email"
              id="email"
              required
              placeholder="tu-email@ejemplo.com"
            />
          </div>
          <div class="form-group">
            <label for="password">Contrase√±a</label>
            <input
              type="password"
              id="password"
              required
              placeholder="Tu contrase√±a"
            />
          </div>
          <button type="submit" class="btn-login">Iniciar Sesi√≥n</button>
          <div id="loginError" class="error-message"></div>
        </form>
        <p style="margin-top: 20px; font-size: 12px; color: #999">
          üîí Autenticaci√≥n segura con Firebase<br />
          üí∞ Optimizado para cero costos
        </p>
      </div>
    </div>

    <!-- Panel de Administraci√≥n -->
    <div id="adminPanel" class="admin-panel" style="display: none">
      <!-- Header -->
      <header class="admin-header">
        <div class="admin-header-left">
          <img src="logo2.jpeg" alt="Logo" class="admin-logo" />
          <h1>Panel Admin (Firebase)</h1>
        </div>
        <div class="admin-header-right">
          <span class="admin-user">üë§ <span id="adminUsername"></span></span>
          <button id="logoutBtn" class="btn-logout">Cerrar Sesi√≥n</button>
        </div>
      </header>

      <!-- Contenido Principal -->
      <div class="admin-content">
        <!-- Barra de b√∫squeda y filtros -->
        <div class="admin-toolbar">
          <div class="search-box">
            <input
              type="text"
              id="searchInput"
              placeholder="üîç Buscar perfume o marca..."
            />
          </div>
          <div class="filter-box">
            <select id="categoryFilter">
              <option value="">Todas las categor√≠as</option>
              <option value="arabes">√Årabes</option>
              <option value="disenador">Dise√±ador</option>
              <option value="nicho">Nicho</option>
              <option value="sets">Sets</option>
            </select>
            <button id="addPerfumeBtn" class="btn-add">
              ‚ûï Agregar Perfume
            </button>
            <button id="refreshBtn" class="btn-refresh">üîÑ Recargar</button>
          </div>
        </div>

        <!-- Estad√≠sticas -->
        <div class="stats-container">
          <div class="stat-card">
            <div class="stat-number" id="totalPerfumes">0</div>
            <div class="stat-label">Total Perfumes</div>
          </div>
          <div class="stat-card">
            <div class="stat-number" id="totalArabes">0</div>
            <div class="stat-label">√Årabes</div>
          </div>
          <div class="stat-card">
            <div class="stat-number" id="totalDisenador">0</div>
            <div class="stat-label">Dise√±ador</div>
          </div>
          <div class="stat-card">
            <div class="stat-number" id="totalNicho">0</div>
            <div class="stat-label">Nicho</div>
          </div>
          <div class="stat-card">
            <div class="stat-number" id="totalSets">0</div>
            <div class="stat-label">Sets</div>
          </div>
        </div>

        <!-- Tabla de perfumes -->
        <div class="table-container">
          <table id="perfumesTable">
            <thead>
              <tr>
                <th>Imagen</th>
                <th>Nombre</th>
                <th>Marca</th>
                <th>Categor√≠a</th>
                <th>Precio Final</th>
                <th>Acciones</th>
              </tr>
            </thead>
            <tbody id="perfumesTableBody">
              <tr>
                <td colspan="6" style="text-align: center; padding: 40px">
                  Cargando perfumes...
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- Modal de Edici√≥n -->
    <div id="editModal" class="modal">
      <div class="modal-overlay"></div>
      <div class="modal-content">
        <div class="modal-header">
          <h2>Editar Perfume</h2>
          <button class="modal-close" onclick="closeEditModal()">√ó</button>
        </div>
        <form id="editForm">
          <div class="modal-body">
            <div class="edit-preview">
              <img id="editImage" src="" alt="Perfume" />
              <div class="edit-info">
                <p>
                  <strong>Categor√≠a:</strong> <span id="editCategoria"></span>
                </p>
                <p><strong>Marca:</strong> <span id="editMarca"></span></p>
                <p><strong>√çndice:</strong> <span id="editIndex"></span></p>
              </div>
            </div>

            <div class="form-group">
              <label for="editNombre">Nombre del Perfume</label>
              <input type="text" id="editNombre" required />
            </div>

            <div class="form-group">
              <label for="editPrecio"
                >Precio Final (el que ve el cliente)</label
              >
              <input
                type="number"
                id="editPrecio"
                required
                placeholder="Ej: 3500"
              />
              <small style="color: #666; font-size: 12px"
                >Este es el precio con incremento incluido</small
              >
            </div>

            <div class="form-group">
              <label for="editGenero">G√©nero</label>
              <select id="editGenero">
                <option value="unisex">Unisex</option>
                <option value="hombre">Hombre</option>
                <option value="mujer">Mujer</option>
              </select>
            </div>

            <div class="form-group">
              <label for="editDescripcion">Descripci√≥n</label>
              <textarea
                id="editDescripcion"
                rows="4"
                placeholder="Descripci√≥n del perfume..."
              ></textarea>
            </div>

            <div class="form-group">
              <label for="editNotasSalida">Notas de Salida</label>
              <input
                type="text"
                id="editNotasSalida"
                placeholder="Ej: Bergamota, Lim√≥n"
              />
            </div>

            <div class="form-group">
              <label for="editNotasCorazon">Notas de Coraz√≥n</label>
              <input
                type="text"
                id="editNotasCorazon"
                placeholder="Ej: Lavanda, Geranio"
              />
            </div>

            <div class="form-group">
              <label for="editNotasFondo">Notas de Fondo</label>
              <input
                type="text"
                id="editNotasFondo"
                placeholder="Ej: Cedro, √Åmbar"
              />
            </div>
          </div>

          <div class="modal-footer">
            <button
              type="button"
              class="btn-secondary"
              onclick="closeEditModal()"
            >
              Cancelar
            </button>
            <button type="submit" class="btn-primary">
              üíæ Guardar Cambios
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Modal de Agregar Perfume -->
    <div id="addModal" class="modal">
      <div class="modal-overlay"></div>
      <div class="modal-content">
        <div class="modal-header">
          <h2>‚ûï Agregar Nuevo Perfume</h2>
          <button class="modal-close" onclick="closeAddModal()">√ó</button>
        </div>
        <form id="addForm">
          <div class="modal-body">
            <div class="form-group">
              <label for="addCategoria">Categor√≠a *</label>
              <select id="addCategoria" required>
                <option value="">Seleccionar categor√≠a</option>
                <option value="arabes">√Årabes</option>
                <option value="disenador">Dise√±ador</option>
                <option value="nicho">Nicho</option>
                <option value="sets">Sets</option>
              </select>
            </div>

            <div class="form-group">
              <label for="addMarca">Marca *</label>
              <input
                type="text"
                id="addMarca"
                required
                placeholder="Ej: Dior, Chanel, Afnan"
              />
              <small style="color: #666; font-size: 12px"
                >Escribe el nombre de la marca (se crear√° si no existe)</small
              >
            </div>

            <div class="form-group">
              <label for="addNombre">Nombre del Perfume *</label>
              <input
                type="text"
                id="addNombre"
                required
                placeholder="Ej: Sauvage Elixir"
              />
            </div>

            <div class="form-group">
              <label for="addImagen">URL de la Imagen *</label>
              <input
                type="url"
                id="addImagen"
                required
                placeholder="https://ejemplo.com/imagen.jpg"
              />
            </div>

            <div class="form-group">
              <label for="addPrecio">Precio Final *</label>
              <input
                type="number"
                id="addPrecio"
                required
                placeholder="Ej: 3500"
              />
              <small style="color: #666; font-size: 12px"
                >Este es el precio con incremento incluido</small
              >
            </div>

            <div class="form-group">
              <label for="addGenero">G√©nero</label>
              <select id="addGenero">
                <option value="unisex">Unisex</option>
                <option value="hombre">Hombre</option>
                <option value="mujer">Mujer</option>
              </select>
            </div>

            <div class="form-group">
              <label for="addDescripcion">Descripci√≥n</label>
              <textarea
                id="addDescripcion"
                rows="4"
                placeholder="Descripci√≥n del perfume..."
              ></textarea>
            </div>

            <div class="form-group">
              <label for="addNotasSalida">Notas de Salida</label>
              <input
                type="text"
                id="addNotasSalida"
                placeholder="Ej: Bergamota, Lim√≥n"
              />
            </div>

            <div class="form-group">
              <label for="addNotasCorazon">Notas de Coraz√≥n</label>
              <input
                type="text"
                id="addNotasCorazon"
                placeholder="Ej: Lavanda, Geranio"
              />
            </div>

            <div class="form-group">
              <label for="addNotasFondo">Notas de Fondo</label>
              <input
                type="text"
                id="addNotasFondo"
                placeholder="Ej: Cedro, √Åmbar"
              />
            </div>
          </div>

          <div class="modal-footer">
            <button
              type="button"
              class="btn-secondary"
              onclick="closeAddModal()"
            >
              Cancelar
            </button>
            <button type="submit" class="btn-primary">
              ‚ûï Agregar Perfume
            </button>
          </div>
        </form>
      </div>
    </div>

    <script type="module" src="admin-firebase.js"></script>
  </body>
</html>
